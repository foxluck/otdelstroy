WbsData=function(){var a={};return{set:function(b){$.extend(a,b)},get:function(c,b){if(c==null){return a}return a[c]||b||null}}}();function newClass(d,e){var c=function(){if(c.preparing){return delete (c.preparing)}if(c.constr){this.constructor=c;c.constr.apply(this,arguments)}};c.prototype={};if(d){d.preparing=true;c.prototype=new d;c.prototype.constructor=d;c.constr=d}if(e){var b="constructor";for(var a in e){if(a!=b){c.prototype[a]=e[a]}}if(e[b]&&e[b]!=Object){c.constr=e[b]}}c.prototype.superclass=function(){return this.constructor.prototype};return c}Function.prototype.bind=function(c,b){if(b){c.self=b}var a=this;return function(){return a.apply(c,arguments)}};function addHandler(a,c,d,b){if(b){d=d.bind(b)}if(document.addEventListener){a.addEventListener(c,d,null)}else{if(document.attachEvent){a.attachEvent("on"+c,d)}else{a["on"+c]=d}}}function createDiv(a){return createElem("div",a)}function createElem(a,c,b){var d=document.createElement(a);$(d).addClass(c);if(b){$(d).attr(b)}return d}function htmlspecialchars(a){if(a==null||typeof a!="string"||a.length==0){return a}return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;")}$().ajaxComplete(function(request,settings){if(settings.status==200){try{var response=eval("("+settings.responseText+")");if(response.errorCode=="SESSION_TIMEOUT"){if(window&&window.parent){var d=window.parent.document}else{var d=document}d.location.href=response.redirectUrl}if(response.status=="ERR"&&!response.hide&&typeof(response.error)=="string"){alert(response.error)}}catch(e){}}});(function(){WBS={getDom:function(a){if(!a||!document){return null}return a.dom?a.dom:(typeof a=="string"?document.getElementById(a):a)}};WBS.util={};WBS.isReady=true;WBS.apply=function(d,e,b){if(b){WBS.apply(d,b)}if(d&&e&&typeof e=="object"){for(var a in e){d[a]=e[a]}}return d};WBS.applyIf=function(b,d){if(b&&d){for(var a in d){if(typeof b[a]=="undefined"){b[a]=d[a]}}}return b};(function(){var i=0;var c=navigator.userAgent.toLowerCase();var j=document.compatMode=="CSS1Compat",e=c.indexOf("opera")>-1,o=(/webkit|khtml/).test(c),k=o&&c.indexOf("webkit/5")!=-1,f=!e&&c.indexOf("msie")>-1,h=!e&&c.indexOf("msie 7")>-1,b=!o&&c.indexOf("gecko")>-1,a=!o&&c.indexOf("rv:1.9")>-1,p=f&&!j,g=(c.indexOf("windows")!=-1||c.indexOf("win32")!=-1),m=(c.indexOf("macintosh")!=-1||c.indexOf("mac os x")!=-1),l=(c.indexOf("adobeair")!=-1),d=(c.indexOf("linux")!=-1),n=window.location.href.toLowerCase().indexOf("https")===0;WBS.apply(WBS,{isOpera:e,isSafari:o,isSafari3:k,isSafari2:o&&!k,isIE:f,isIE6:f&&!h,isIE7:h,isGecko:b,isGecko2:b&&!a,isGecko3:a,isBorderBox:p,isLinux:d,isWindows:g,isMac:m,isAir:l})})();WBS.util.Observable=function(){if(this.listeners){this.on(this.listeners);delete this.listeners}};WbsObservable=WBS.util.Observable;WBS.util.Observable.prototype={fireEvent:function(){if(this.eventsSuspended!==true){var a=this.events[arguments[0].toLowerCase()];if(typeof a=="object"){return a.fire.apply(a,Array.prototype.slice.call(arguments,1))}}return true},filterOptRe:/^(?:scope|delay|buffer|single)$/,addListener:function(a,c,b,g){if(typeof a=="object"){g=a;for(var f in g){if(this.filterOptRe.test(f)){continue}if(typeof g[f]=="function"){this.addListener(f,g[f],g.scope,g)}else{this.addListener(f,g[f].fn,g[f].scope,g[f])}}return}g=(!g||typeof g=="boolean")?{}:g;a=a.toLowerCase();var d=this.events[a]||true;if(typeof d=="boolean"){d=new WBS.util.Event(this,a);this.events[a]=d}d.addListener(c,b,g)},removeListener:function(a,c,b){var d=this.events[a.toLowerCase()];if(typeof d=="object"){d.removeListener(c,b)}},purgeListeners:function(){for(var a in this.events){if(typeof this.events[a]=="object"){this.events[a].clearListeners()}}},relayEvents:function(f,d){var e=function(g){return function(){return this.fireEvent.apply(this,WBS.combine(g,Array.prototype.slice.call(arguments,0)))}};for(var c=0,a=d.length;c<a;c++){var b=d[c];if(!this.events[b]){this.events[b]=true}f.on(b,e(b),this)}},addEvents:function(e){if(!this.events){this.events={}}if(typeof e=="string"){for(var d=0,b=arguments,c;c=b[d];d++){if(!this.events[b[d]]){this.events[b[d]]=true}}}else{WBS.applyIf(this.events,e)}},hasListener:function(a){var b=this.events[a];return typeof b=="object"&&b.listeners.length>0},suspendEvents:function(){this.eventsSuspended=true},resumeEvents:function(){this.eventsSuspended=false},getMethodEvent:function(h){if(!this.methodEvents){this.methodEvents={}}var g=this.methodEvents[h];if(!g){g={};this.methodEvents[h]=g;g.originalFn=this[h];g.methodName=h;g.before=[];g.after=[];var c,b,d;var f=this;var a=function(j,i,e){if((b=j.apply(i||f,e))!==undefined){if(typeof b==="object"){if(b.returnValue!==undefined){c=b.returnValue}else{c=b}if(b.cancel===true){d=true}}else{if(b===false){d=true}else{c=b}}}};this[h]=function(){c=b=undefined;d=false;var j=Array.prototype.slice.call(arguments,0);for(var k=0,e=g.before.length;k<e;k++){a(g.before[k].fn,g.before[k].scope,j);if(d){return c}}if((b=g.originalFn.apply(f,j))!==undefined){c=b}for(var k=0,e=g.after.length;k<e;k++){a(g.after[k].fn,g.after[k].scope,j);if(d){return c}}return c}}return g},beforeMethod:function(d,b,a){var c=this.getMethodEvent(d);c.before.push({fn:b,scope:a})},afterMethod:function(d,b,a){var c=this.getMethodEvent(d);c.after.push({fn:b,scope:a})},removeMethodListener:function(g,d,c){var f=this.getMethodEvent(g);for(var b=0,a=f.before.length;b<a;b++){if(f.before[b].fn==d&&f.before[b].scope==c){f.before.splice(b,1);return}}for(var b=0,a=f.after.length;b<a;b++){if(f.after[b].fn==d&&f.after[b].scope==c){f.after.splice(b,1);return}}}};WBS.util.Observable.prototype.on=WBS.util.Observable.prototype.addListener;WBS.util.Observable.prototype.un=WBS.util.Observable.prototype.removeListener;WBS.util.Observable.capture=function(c,b,a){c.fireEvent=c.fireEvent.createInterceptor(b,a)};WBS.util.Observable.releaseCapture=function(a){a.fireEvent=WBS.util.Observable.prototype.fireEvent};(function(){var b=function(f,g,e){var d=new WBS.util.DelayedTask();return function(){d.delay(g.buffer,f,e,Array.prototype.slice.call(arguments,0))}};var c=function(g,i,f,d){return function(){i.removeListener(f,d);return g.apply(d,arguments)}};var a=function(e,f,d){return function(){var g=Array.prototype.slice.call(arguments,0);setTimeout(function(){e.apply(d,g)},f.delay||10)}};WBS.util.Event=function(e,d){this.name=d;this.obj=e;this.listeners=[]};WBS.util.Event.prototype={addListener:function(g,f,e){f=f||this.obj;if(!this.isListening(g,f)){var d=this.createListener(g,f,e);if(!this.firing){this.listeners.push(d)}else{this.listeners=this.listeners.slice(0);this.listeners.push(d)}}},createListener:function(g,f,i){i=i||{};f=f||this.obj;var d={fn:g,scope:f,options:i};var e=g;if(i.delay){e=a(e,i,f)}if(i.single){e=c(e,this,g,f)}if(i.buffer){e=b(e,i,f)}d.fireFn=e;return d},findListener:function(j,h){h=h||this.obj;var f=this.listeners;for(var g=0,d=f.length;g<d;g++){var e=f[g];if(e.fn==j&&e.scope==h){return g}}return -1},isListening:function(e,d){return this.findListener(e,d)!=-1},removeListener:function(f,e){var d;if((d=this.findListener(f,e))!=-1){if(!this.firing){this.listeners.splice(d,1)}else{this.listeners=this.listeners.slice(0);this.listeners.splice(d,1)}return true}return false},clearListeners:function(){this.listeners=[]},fire:function(){var f=this.listeners,j,d=f.length;if(d>0){this.firing=true;var g=Array.prototype.slice.call(arguments,0);for(var h=0;h<d;h++){var e=f[h];if(e.fireFn.apply(e.scope||this.obj||window,arguments)===false){this.firing=false;return false}}this.firing=false}return true}}})();WBS.History=(function(){var e,c;var j=false;var d;function f(){var k=top.location.href,l=k.indexOf("#");return l>=0?k.substr(l+1):null}function a(){c.value=d}function g(k){d=k;WBS.History.fireEvent("change",k)}function h(l){var k=['<html><body><div id="state">',l,"</div></body></html>"].join("");try{var n=e.contentWindow.document;n.open();n.write(k);n.close();return true}catch(m){return false}}function b(){if(!e.contentWindow||!e.contentWindow.document){setTimeout(b,10);return}var n=e.contentWindow.document;var l=n.getElementById("state");var k=l?l.innerText:null;var m=f();setInterval(function(){n=e.contentWindow.document;l=n.getElementById("state");var p=l?l.innerText:null;var o=f();if(p!==k){k=p;g(k);top.location.hash=k;m=k;a()}else{if(o!==m){m=o;h(o)}}},50);j=true;WBS.History.fireEvent("ready",WBS.History)}function i(){d=c.value;if(WBS.isIE){b()}else{var k=f();setInterval(function(){var l=f();if(l!==k){k=l;g(k);a()}},50);j=true;WBS.History.fireEvent("ready",WBS.History)}}return{fieldId:"x-history-field",iframeId:"x-history-frame",events:{},init:function(l,k){if(j){WBS.callback(l,k,[this]);return}if(!WBS.isReady){WBS.onReady(function(){WBS.History.init(l,k)});return}c=WBS.getDom(WBS.History.fieldId);if(WBS.isIE){e=WBS.getDom(WBS.History.iframeId)}this.addEvents("ready","change");if(l){this.on("ready",l,k,{single:true})}i()},add:function(k,l){if(l!==false){if(this.getToken()==k){return true}}if(WBS.isIE){return h(k)}else{top.location.hash=k;return true}},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return j?d:f()},_getToken:function(){return f()}}})();WBS.apply(WBS.History,new WBS.util.Observable())})();WbsObservable=newClass(WBS.util.Observable,{});WbsApplication=newClass(null,{contructor:function(){},startLoading:function(){if(window.parent&&window.parent.showHideLoading){window.parent.showHideLoading(true)}},finishLoading:function(){if(window.parent&&window.parent.showHideLoading){window.parent.showHideLoading(false)}},openSubframe:function(a,d){this.closeSubframe();if(d){a=this.getOldUrl(a)}var c=createElem("iframe","subframe");c.style.width="100%";c.style.height="100%";c.frameBorder="no";c.setAttribute("SCROLLING","NO");this.startLoading();addHandler(c,"load",this.finishLoading,this);var b=document.getElementById("screen-content-block");b.insertBefore(c,b.firstChild);if(Ext.isOpera){c.location.href=a}else{c.src=a}this.subFrame=c},closeSubframe:function(){if(this.subFrame){this.subFrame.parentNode.removeChild(this.subFrame);this.subFrame=null}},getOldUrl:function(a){return"../html/"+a}});function getAbsolutePos(b){var c={x:b.offsetLeft,y:b.offsetTop};if(b.parentNode&&b.parentNode.scrollTop){c.y-=b.parentNode.scrollTop}if(b.offsetParent){var a=getAbsolutePos(b.offsetParent);c.x+=a.x;c.y+=a.y}return c}WbsPopwindow=newClass(WbsObservable,{constructor:function(a){if(!a){a={}}this.config=a;if(!this.config.hideMode){this.config.hideMode="close"}if(!document.wbsPopmenuClickLinked){addHandler(document,"click",wbsPopmenuOnDocumentClick,false);document.wbsPopmenuClickLinked=true}var b=document.createElement("div");b.style.position="absolute";$(b).addClass(this.getWindowCls());$(b).css({"z-index":500});if(a.cls){$(b).addClass(a.cls)}if(a.width){b.style.width=a.width+"px"}else{if(!a.cls){b.style.width="auto"}}if(a.height){b.style.height=a.height+"px"}this.elem=b},getWindowCls:function(){return"wbs-popwindow"},render:function(){},show:function(h){if(document.wbsPopmenuCurrent!=null){document.wbsPopmenuCurrent.close()}this.render();h=h||window.event;if(h.stopPropagation){h.stopPropagation()}else{h.cancelBubble=true}var g=h.target||h.srcElement;var c=getAbsolutePos(g);var f=c.x;var d=c.y-$("#"+this.config.offsetScroll).scrollTop();var b=this.elem;b.style.top=d+g.offsetHeight+"px";b.style.left=f+"px";document.body.appendChild(b);b.style.visibility="visible";document.wbsPopmenuCurrent=this;if(f+b.offsetWidth>$(document).width()){b.style.left=($(document).width()-b.offsetWidth-20)+"px"}if(d+b.offsetHeight+$(b).height()>$(document).height()){var a=d-b.offsetHeight;if(a>0){b.style.top=a+"px"}}if(this.onAfterShow){this.onAfterShow(h)}},hide:function(){throw"Not implement hide method"},close:function(){if(this.onClose){this.onClose()}var a=this.elem;a.style.visibility="hidden";document.wbsPopmenuCurrent=null;a.parentNode.removeChild(a);delete a},getElem:function(){return this.elem},getInnerElem:function(){if(this.innerElem){return this.innerElem}this.innerElem=createDiv("wbs-popwindow-inner");this.getElem().appendChild(this.innerElem);return this.innerElem}});function wbsPopmenuOnDocumentClick(d){if(!document.wbsPopmenuCurrent){return}d=d||event;var c=d.target||d.srcElement;var b=document.wbsPopmenuCurrent.getElem();if(b){var a=c;while(a.parentNode&&a!=b){a=a.parentNode}if(!a||a!=b){document.wbsPopmenuCurrent.close()}}}WbsPopmenu=newClass(WbsPopwindow,{constructor:function(a){this.items=new Array();this.superclass().constructor.call(this,a);this.isPd=a.isPd},render:function(){var c=document.createElement("ul");for(var b=0;b<this.config.items.length;b++){var d=this.config.items[b];var a=this.createItem(d);if(d.id){this.items[d.id]=a}else{this.items[this.items.length]=a}c.appendChild(a)}this.elem.appendChild(c)},getWindowCls:function(){if(this.config.withImages){return"wbs-popmenu wbs-popmenu-images"}else{return"wbs-popmenu"}},getItem:function(a){return this.items[a]},setItems:function(a){this.config.items=a},refreshItem:function(a,c){var b=this.createItem(c);if(c.id){this.items[c.id]=a}a.parentNode.replaceChild(b,a)},hideItem:function(a){$(this.items[a]).addClass("hidden")},showItem:function(a){$(this.items[a]).removeClass("hidden")},createItem:function(c){var a=document.createElement("li");if(c.cls){$(a).addClass(c.cls)}if(c.iconCls){$(a).addClass("with-image").addClass(c.iconCls)}if(c=="-"){a.className="separator";a.innerHTML="<div></div>"}else{if(c.html){a.innerHTML=c.html}else{var b=document.createElement("a");b.href="javascript:void(0)";var d=document.createTextNode(c.label);b.appendChild(d);a.appendChild(b);if(!c.hidden){if(this.isPd){$(a).append('<img src="../common/html/res/images/s.gif" width="1" height="1" />')}else{$(a).append('<img src="../common/html/res/images/s.gif" width="1" height="1" />')}}}}if(c.onClick&&!c.disabled){a.onclick=function(e){return function(){var f=e.scope?e.scope:this;var g=e.onClick.bind(f)();if(!e.onClickNoHide){this.close()}return g}}(c).bind(this)}a.onmouseover=function(){if(!this.disabled){$(this).addClass("highlight")}};a.onmouseout=function(){if(!this.disabled){$(this).removeClass("highlight")}};if(c.hidden){$(a).addClass("hidden")}if(c.disabled){$(a).addClass("disabled");a.disabled=true}a.setText=function(e){this.innerHTML=e};return a}});WbsButton=newClass(null,{constructor:function(a){this.config=a;this.disabled=false;if(!this.cls){this.cls="wbs-btn"}this.render()},build:function(a,b){this.btnElem.appendChild(b);this.btnElem.appendChild(a)},setDisplayed:function(a){this.btnElem.style.display=(a!=false)?"":"none"},render:function(){var b=this.getContentElem();var c=createDiv(this.cls);this.btnElem=c;var e=createDiv("wbs-btn-adv");var a=createElem("a","wbs-btn-content");a.setAttribute("href","javascript:void(0)");if(this.config.iconUrl){a.style.backgroundImage="URL("+this.config.iconUrl+")";$(a).addClass("wbs-btn-withicon")}if(this.config.advIconUrl){e.style.backgroundImage="URL("+this.config.advIconUrl+")";$(e).addClass("wbs-btn-left-icon")}var d=this.config.label;if(!d&&b.value){d=b.value}if(!d){d=""}a.innerHTML=d;this.build(a,e);if(this.config.onClick){addHandler(c,"click",this.onClick,this)}b.parentNode.replaceChild(c,b)},getContentElem:function(){var a=document.getElementById(this.config.el);if(!a){throw"No content element for WbsButton: "+this.config.el}return a},getElem:function(){return this.btnElem},onClick:function(a){if(this.disabled){return false}if(this.config.onClick){this.config.onClick(a)}},setDisabled:function(a){this.disabled=a;if(a){$(this.btnElem).addClass("wbs-btn-disabled")}else{$(this.btnElem).removeClass("wbs-btn-disabled")}},disable:function(){this.setDisabled(true)},enable:function(){this.setDisabled(false)}});WbsLinkButton=newClass(WbsButton,{constructor:function(a){this.cls="wbs-link-btn";this.superclass().constructor.call(this,a)},build:function(a,b){this.btnElem.appendChild(a)}});WbsMenuButton=newClass(WbsButton,{constructor:function(a){this.cls="wbs-menu-btn";this.superclass().constructor.call(this,a);if(this.config.getMenu){addHandler(this.btnElem,"click",function(c){var b=(this.config.scope)?this.config.getMenu.bind(this.config.scope):this.config.getMenu;var d=b(c);if(d){d.show(c)}},this)}},build:function(a,b){this.btnElem.appendChild(a);this.btnElem.appendChild(b)}});WbsFlexContainer=newClass(null,{constructor:function(a){this.config=a;this.contentElem=a.contentElem;this.elem=a.elem;if(!this.contentElem){throw"No exists content elem for WbsFlexContainer"}this.elem.addClass("wbs-flexcontainer");this.childElems=new Array();this.buildPage();var b=this.resize.bind(this);$(document).ready(b);$(window).resize(b)},addChildElem:function(a){this.childElems[this.childElems.length]=a},buildPage:function(){if(this.config.headerElem){this.config.headerElem.addClass("wbs-flexcontainer-header");this.addChildElem(this.config.headerElem)}this.contentElem.addClass("wbs-flexcontainer-content");this.addChildElem(this.contentElem);if(this.config.footerElem){this.contentElem.addClass("wbs-flexcontainer-footer");this.addChildElem(this.config.footerElem)}},resize:function(){var c=0;for(var b=0;b<this.childElems.length;b++){var a=this.childElems[b];if(a==this.contentElem){continue}c+=a.outerHeight()}this.elem.height($(window).height()-c);this.contentElem.height(this.elem.height())}});WbsViewmodeSelector=newClass(WbsObservable,{constructor:function(b,a){this.renderElem=a.elem;this.rendered=false;this.table=b;if(a.modes){this.modes=a.modes}else{this.modes=new Array("columns","list","detail","tile")}modeSelector=this;this.modesElems={};this.onclick=null;this.superclass().constructor.call(this);this.addEvents({viewmodeChanged:true})},render:function(){this.container=document.createElement("div");this.container.className="viewmode-selector";for(var a=0;a<this.modes.length;a++){var b=this.createModeElem(this.modes[a]);this.container.appendChild(b)}this.renderElem.appendChild(this.container);this.rendered=true},setSelectedElem:function(a){if(this.selectedModeElem!=null){removeClass(this.selectedModeElem,"selected");this.selectedModeElem.img.src=this.getModeImgSrc(this.selectedModeElem.mode,false)}if(!a){return}addClass(a,"selected");a.img.src=this.getModeImgSrc(a.mode,true);this.selectedModeElem=a},getModeImgSrc:function(c,a){var b=(a)?"_on":"";return("../../common/templates/img/viewmode_"+c+b+".gif")},isRendered:function(){return this.rendered},selectMode:function(a){this.setMode(a);this.fireEvent("viewmodeChanged",a)},setMode:function(a){this.selectedMode=a;if(this.isRendered()){this.setSelectedElem(this.modesElems[a])}if(this.table){this.table.setViewMode(a)}if(this.onClick){this.onClick(this,a)}},setTable:function(a){this.table=a;this.setMode(this.selectedMode)},createModeElem:function(c){var a=createDiv("mode-elem");this.modesElems[c]=a;a.mode=c;a.img=createElem("img");a.img.src=this.getModeImgSrc(c);a.appendChild(a.img);if(c==this.selectedMode){this.setSelectedElem(a)}var b=this.table;a.onclick=function(){modeSelector.selectMode(c)};return a}});
