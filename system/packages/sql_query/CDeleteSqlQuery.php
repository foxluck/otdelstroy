<?php
	/***********************************************************
	* ������ SQL-������
	* ********************************************************/

	class CDeleteSqlQuery extends CSqlQuery {

	/***********************************************************
	* ��������� ������
	* ********************************************************/
		
	/***********************************************************
	* ����� ������
	* ********************************************************/
		
		var $m_all;

	/***********************************************************
	* ������� ����������
	* ********************************************************/

		/***********************************************************
		* �����������
		* ���������: 
		*	1) ��� �������� �������
		* ********************************************************/
		function CDeleteSqlQuery ($f_main_table, $f_main_table_alias = "") {
			parent::CSqlQuery ("delete", $f_main_table);
		}


		/***********************************************************
		* ������������� $m_all - �.�. ��� ������ �� �������
		* ********************************************************/
		function setAll ($f_all = true) {
			$this->m_all = $f_all;
		}





		


		
		/***********************************************************
		* ���������� ��������� �������������
		* ********************************************************/
		function getQueryText () {
			$result = "";

			
			$result = "DELETE ";
			$result .= " FROM " . $this->m_main_table;

			if (!$this->m_all) {
				$conditions = $this->_getConditionsStr ();
				if (!$conditions) {
					throw new RuntimeException ("Delete query without conditons");
				} else {
					$result .= $conditions;
				}
			}

			return $result;
		}

		

	};
?>